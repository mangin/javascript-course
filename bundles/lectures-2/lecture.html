<!DOCTYPE HTML>
<html lang="en">
<head>
    <title>JS Course</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=792, user-scalable=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <link rel="stylesheet" href="../../node_modules/shower-ribbon/styles/screen.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body class="list">
<header class="caption">
    <h1>JS Course</h1>
</header>
<section class="slide cover" id="Cover">
    <div>
        <h2>JS Course</h2>

        <p>Brought to you by Mangin Alexander</p>
        <img src="../../pictures/cover.jpg" alt="">
    </div>
</section>

<section class="slide">
    <div>
        <h2>Полезные операторы</h2>
    </div>
</section>

<section class="slide">
    <div>
        <h2>Установка default-значений</h2>
        <pre class="code_size_medium">
            <code>function createCinema(x, y, options) {</code>
            <code>  if (typeof options === 'undefined') { </code>
            <code>    options = {}; </code>
            <code>}</code>
            <code> </code>
            <code>  this.x = x;</code>
            <code>  this.y = y;</code>
            <code>  this.options = options;</code>
            <code>}</code>
        </pre>
    </div>
</section>

<section class="slide">
    <div>
        <h2>Установка default-значений</h2>
        <pre class="code_size_medium">
            <code>function createCinema(x, y, options) {</code>
            <code>  options = options || {}; </code>
            <code> </code>
            <code>  this.x = x;</code>
            <code>  this.y = y;</code>
            <code>  this.options = options;</code>
            <code>}</code>
        </pre>
    </div>
</section>

<section class="slide">
    <div>
        <h2>Длинный if</h2>
        <pre class="code_size_medium">
            <code>function createCinema(x, y, options) {</code>
            <code>  this.x = x;</code>
            <code>  this.y = y;</code>
            <code>  </code>
            <code>  if (options.extendThis) {</code>
            <code>    options.extendThis(this);</code>
            <code>  }</code>
            <code>}</code>
        </pre>
    </div>
</section>

<section class="slide">
    <div>
        <h2>Короткий if</h2>
        <pre class="code_size_medium">
            <code>function createCinema(x, y, options) {</code>
            <code>  this.x = x;</code>
            <code>  this.y = y;</code>
            <code>  </code>
            <code>  options.extendThis && options.extendThis(this);</code>
            <code>}</code>
        </pre>
    </div>
</section>

<section class="slide">
    <div>
        <h2>оператор запятая</h2>
        <pre>
            <code>var a = 1, 2, 3;</code>
            <code><span class="next">// 3</span></code>
        </pre>
    </div>
</section>

<section class="slide">
    <div>
        <h2>оператор запятая</h2>
        <pre>
            <code>var szv = (fillPerson(person), buildSzv(person));</code>
            <code>szv</code>
        </pre>
    </div>
</section>

<section class="slide">
    <div>
        <h2>Все вместе:</h2>
        <ul>
            <li>a() || b()</li>
            <li>a() && b()</li>
            <li>a(), b()</li>
        </ul>
    </div>
</section>

<section class="slide">
    <div>
        <h2>Что можно использовать</h2>
        <ul>
            <li>|| - можно</li>
            <li>&& - не всегда стоит</li>
            <li>a(), b() - не стоит</li>
        </ul>
    </div>
</section>

<section class="slide">
    <div>
        <h2>== vs ===</h2>
        <ul>
        <li><a href="https://es5.github.io/#x11.9.3">The Abstract Equality Comparison Algorithm</a></li>
        <li><a href="https://es5.github.io/#x11.9.6">The Strict Equality Comparison Algorithm</a></li>
    </ul>
    <div class="next">
        <ul>
            <li><a href="https://es5.github.io/#x11.9.3">22 пункта</a></li>
            <li><a href="https://es5.github.io/#x11.9.6">13 пунктов</a></li>
        </ul>
    </div>
    </div>
</section>

<section class="slide">
    <div>
        <h2>Вывод:</h2>

        <p>
            Всегда используйте тройное равно!
        </p>
    </div>
</section>

<section class="slide">
    <div>
        <h2>Statement и Expression</h2>
    </div>
</section>

<section class="slide">
    <div>
        <h2>Statement</h2>
        <ul>
            <li>for</li>
            <li>while</li>
            <li>if</li>
            <li>var</li>
            <li>function someDo () { /* */}</li>
        </ul>
    </div>

</section>

<section class="slide">
    <div>
        <h2>Expression</h2>
        <ul>
            <li>1 + 2</li>
            <li>var a = function () { return 1;}</li>
            <li>void 0;</li>
            <li>null</li>
            <li>x = y = 2;</li>
            <li>...</li>
        </ul>
    </div>
</section>

<section class="slide">
    <div>
        <h2>Занимательные факты</h2>
        <ul>
            <li>Expression всегда возвращает значение</li>
            <li>Statement никогда не возвращает значение</li>
            <li>Expression можно поставить вместо Statement</li>
            <li>Statemen нельзя поставить вместо Expression</li>
        </ul>
    </div>

</section>

<section class="slide">
    <div>
        <h2>Функции</h2>
    </div>
</section>

<section class="slide">
    <div>
        <h2>Function Declaration</h2>
        <pre class="code_size_medium">
        <code>function sum(array) {</code>
        <code>  return array.reduce(function(prev, next) {</code>
        <code>    return prev + next;</code>
        <code>  }, 0);</code>
        <code>}</code>
    </pre>
    </div>
</section>

<section class="slide">
    <div>
        <pre class="code_size_medium">
        <code>function c(array) {</code>
        <code>  //? <span class="next">a,b</span></code>
        <code>  function a(array) {</code>
        <code>    return '1';</code>
        <code>  }</code>
        <code>  //?<span class="next">a,b</span></code>
        <code>  function b(array) {</code>
        <code>    return '1';</code>
        <code>  }</code>
        <code>  //?<span class="next">a,b</span></code>
        <code>}</code>
    </pre>
    </div>

</section>

<section class="slide">
    <div>
        <h2>Function Expression</h2>
        <pre class="code_size_medium">
        <code>var sum = function (array) {</code>
        <code>  return array.reduce(function(prev, next) {</code>
        <code>    return prev + next;</code>
        <code>  }, 0);</code>
        <code>}</code>
    </pre>
    </div>

</section>

<section class="slide">
    <div>
        <h2>Примерчик</h2>
        <pre class="code_size_medium">
        <code>function c(array) {</code>
        <code>  //? <span class="next">-</span></code>
        <code>  var a = function (array) {</code>
        <code>    return '1';</code>
        <code>  };</code>
        <code>  //?<span class="next">a</span></code>
        <code>  var b = function (array) {</code>
        <code>    return '1';</code>
        <code>  };</code>
        <code>  //?<span class="next">a,b</span></code>
        <code>}</code>
    </pre>
    </div>

</section>

<section class="slide">
    <div>
        <h2>Примерчик</h2>
        <pre class="code_size_medium">
        <code>function c(array) {</code>
        <code>  var a, b;</code>
        <code>  </code>
        <code>  a = function (array) {</code>
        <code>    return '1';</code>
        <code>  };</code>
        <code>  </code>
        <code>  b = function (array) {</code>
        <code>    return '1';</code>
        <code>  };</code>
        <code>  </code>
        <code>}</code>
    </pre>
    </div>

</section>


<section class="slide">
    <div>
        <h2>Function Declaration in condition</h2>
        <pre class="code_size_medium">
        <code>function do(array) {</code>
        <code>  innerDo();</code>
        <code>  if (1) {</code>
        <code>    function innerDo () {/** code1 **/}</code>
        <code>  } else</code>
        <code>    function innerDo () {/** code2 **/}</code>
        <code>  }</code>
        <code>}</code>
    </pre>
    </div>

</section>

<section class="slide">
    <div>
        <h2>Function Declaration with condition</h2>
        <pre class="code_size_medium">
        <code>function do(array) {</code>
        <code>  var innerDo;</code>
        <code>  </code>
        <code>  if (1) {</code>
        <code>    innerDo = function () {/** code1 **/};</code>
        <code>  } else</code>
        <code>    innerDo = function () {/** code2 **/};</code>
        <code>  }</code>
        <code>  </code>
        <code>  innerDo();</code>
        <code>}</code>
    </pre>
    </div>

</section>

<section class="slide">
    <div>
        <h2>Immediately-Invoked Function Expression (IIFE)</h2>
        <pre class="code_size_medium">
        <code>(function () {</code>
        <code> /* code */</code>
        <code>}());</code>
    </pre>
    </div>

</section>

<section class="slide">
    <div>
        <h2>IIFE</h2>
        <ul>
            <li>function () {/* */}()</li>
            <li><strong>(function () {/* */}())</strong></li>
            <li>(function(){ /* code */ })()</li>
            <li>+function () {/* */}()</li>
            <li>!function () {/* */}()</li>
            <li>~function () {/* */}()</li>
        </ul>
    </div>
</section>

<section class="slide">
    <div>
        <h2>больше IIFE!</h2>
        <ul>
            <li>0, function () {/* */}()</li>
            <li>true && function () {/* */}()</li>
            <li>var i = function () {/* */}()</li>
        </ul>
    </div>
</section>

<section class="slide">
    <div>
        <h2>Так зачем они нужны?</h2>
        <ul>
            <li>
                Шаблон 'модуль'
            </li>
            <li>
                Замыкания
            </li>
        </ul>
    </div>
</section>

<section class="slide">
    <div>
        <h2>Шаблон модуль</h2>
        <pre class="code_size_medium">
            <code>(function () {</code>
            <code>  function privateFunction () {}</code>
            <code>  function publicFunction () {}</code>
            <code>  </code>
            <code>  window.publicFunction = publicFunction;</code>
            <code>}());</code>
        </pre>
    </div>
</section>

<section class="slide">
    <div>
        <h2>Шаблон модуль</h2>
        <pre class="code_size_medium">
            <code>var globalEntity = (function () {</code>
            <code>  var entity = {};</code>
            <code>  </code>
            <code>  /** настраиваем объект **/</code>
            <code>  </code>
            <code>  return entity;</code>
            <code>}());</code>
        </pre>
    </div>
</section>

<section class="slide">
    <div>
        <h2>Явная передача глобальных переменных</h2>
        <pre class="code_size_medium">
            <code>var globalEntity = (function (g1, g2) {</code>
            <code>  /** code **/</code>
            <code>}(global1, global2));</code>
        </pre>
    </div>
</section>

<section class="slide">
    <div>
        <h2>Передача undefined</h2>
        <pre class="code_size_medium">
            <code>var globalEntity = (function (g, undefined) {</code>
            <code>  /** code **/</code>
            <code>}(g));</code>
        </pre>
    </div>
</section>

<section class="slide">
    <div>
        <h2>Замыкания</h2>
    </div>
</section>

<section class="slide">
    <div>
        <h2>Замыкания</h2>
        <pre class="code_size_medium">
            <code>function createFunction () {</code>
            <code>  var secret = 42,</code>
            <code>    func = function () {</code>
            <code>      return secret + 1;</code>
            <code>  }</code>
            <code>  </code>
            <code>  return func;</code>
            <code>}</code>
        </pre>
    </div>
</section>

<section class="slide">
    <div>
        <h2>Пример на понимание</h2>
        <pre class="code_size_medium">
            <code>var arr = [];</code>
            <code> </code>
            <code>for(var i = 0; i < 10; i += 1) {</code>
            <code>    arr.push(function () {</code>
            <code>      return i;</code>
            <code>    });</code>
            <code>  }</code>
            <code> </code>
            <code>for(var i = 0; i < 10; i += 1) {</code>
            <code>    console.log(arr[i]());</code>
            <code>}</code>
            <code> </code>
        </pre>
    </div>
</section>

<section class="slide">
    <div>
        <h2>Пример на понимание</h2>
        <pre class="code_size_medium">
            <code>var arr = [], i, j;</code>
            <code> </code>
            <code>for( i = 0; i < 10; i += 1) {</code>
            <code>    arr.push(function () {</code>
            <code>      return i;</code>
            <code>    });</code>
            <code>  }</code>
            <code> </code>
            <code>for(j = 0; j < 10; j += 1) {</code>
            <code>    console.log(arr[j]());</code>
            <code>}</code>
            <code> </code>
        </pre>
    </div>
</section>

<section class="slide">
    <div>
        <h2>Как исправить ?</h2>
        <pre class="code_size_medium">
            <code>var arr = [], i, j;</code>
            <code> </code>
            <code>for( i = 0; i < 10; i += 1) {</code>
            <code>  (function () {</code>
            <code>    var k = i;</code>
            <code>    arr.push(function () {</code>
            <code>      return k;</code>
            <code>    });</code>
            <code>  }());</code>
            <code>  }</code>
            <code> </code>
            <code>for(j = 0; j < 10; j += 1) {</code>
            <code>    console.log(arr[j]());</code>
            <code>}</code>
            <code> </code>
        </pre>
    </div>
</section>

<section class="slide">
    <div>
        <h2>Интересности о функциях</h2>
    </div>
</section>

<section class="slide">
    <div>
        <h2>Name</h2>
        <pre class="code_size_medium">
            <code>var f = function zzz () {};</code>
            <code>console.log(f.name);</code>
        </pre>
    </div>
</section>

<section class="slide">
    <div>
        <h2>arguments</h2>
        <pre class="code_size_medium">
            <code>function sum () {</code>
            <code>  for(var i = 0; i < arguments.length; i += 1) {</code>
            <code>   console.log(arguments[i]);</code>
            <code>  }</code>
            <code>}</code>
        </pre>
    </div>
</section>

<section class="slide">
    <div>
        <h2>caller</h2>
        <pre class="code_size_medium">
            <code>function someFunction () {</code>
            <code>  console.log(someFunction.caller);</code>
            <code>}</code>
        </pre>
    </div>
</section>

<section class="slide">
    <div>
        <h2>caller</h2>
        <pre class="code_size_medium">
            <code>function a () {</code>
            <code>  console.log(a.caller);</code>
            <code>  var b = function() {</code>
            <code>     console.log(b.caller);</code>
            <code>  }</code>
            <code>  </code>
            <code>  b();</code>
            <code>}</code>
            <code> </code>
            <code>a();</code>
        </pre>
    </div>
</section>

<section class="slide">
    <div>
        <h2>arguments.callee</h2>
        <pre class="code_size_medium">
            <code>function a () {</code>
            <code>  return a == arguments.callee;</code>
            <code> </code>
            <code>a();</code>
        </pre>
    </div>
</section>

<section class="slide">
    <div>
        <h2>arguments.callee.caller</h2>
    </div>
</section>

<section class="slide">
    <div>
        <h2>this</h2>
    </div>
</section>

<section class="slide">
    <div>
        <h2>Что такое this в Java* языках</h2>
        <p class="next">
            Это ссылка на текущий экземпляр объекта
        </p>
    </div>
</section>

<section class="slide">
    <div>
        <h2>Пример:</h2>
        <pre>
            <code>class Circle {</code>
            <code>  public bool hasPoint(Point point) {</code>
            <code style="font-size: 0.8em;">    if ((<strong>this</strong>.x - point.x)^2 + (<strong>this.y</strong> - point.y)^2 < <strong>this.radius</strong>) {</code>
            <code>     return true;</code>
            <code>    }</code>
            <code>    </code>
            <code>    return false;</code>
            <code>}</code>
        </pre>
    </div>
</section>

<section class="slide">
    <div>
        <h2>This в Java-like языках</h2>
        <ul>
            <li>Определяется по месту объявления класса</li>
            <li>Нельзя переопределить</li>
        </ul>
    </div>
</section>

<section class="slide">
    <div>
        <h2>Что такое this в JavaScript</h2>
        <p class="next">
            Это <strong>контекст</strong> вызова функции.
        </p>
    </div>
</section>

<section class="slide">
    <div>
        <h2>this</h2>
        <ul>
            <li>Обычный вызов функции</li>
            <li>Вызов функции в режиме конструктора</li>
            <li>Ручная установка this</li>
        </ul>
    </div>
</section>


<section class="slide">
    <div>
        <h2>Вызов функции в режиме конструктора</h2>
        <pre class="code_size_medium">
            <code>function Circle() {</code>
            <code>  this.x = 123;</code>
            <code>  this.y = 42;</code>
            <code>}</code>
            <code> </code>
            <code>var circle = new Circle()</code>
        </pre>
    </div>
</section>

<section class="slide">
    <div>
        <h2>Что возвращает конструктор?</h2>
        <ul>
            <li>экземпляр 'класса'</li>
            <li class="next">Но 'не всегда'</li>
        </ul>
    </div>
</section>

<section class="slide">
    <div>
        <h2>Когда бывает 'не всегда'</h2>
        <ul>
            <li>Если результат функции примитивный тип, то возвращаем this</li>
            <li>Если результат функции объект, то возвращаем этот объект</li>
        </ul>
    </div>
</section>

<section class="slide">
    <div>
        <h2>Зачем возвращать что-то другое?</h2>
        <ul>
            <li>Singleton</li>
            <li class="next">И почему бы и нет :)</li>
        </ul>
    </div>
</section>

<section class="slide">
    <div>
        <h2>Singleton</h2>
        <pre>
            <code>var apiProvider = null;</code>
            <code>function ApiProvider() {</code>
            <code>  if (apiProvider !== null) {</code>
            <code>    return apiProvider;</code>
            <code>  }</code>
            <code>  /** сложная логика инициализации + создание 100500 объектов **/</code>
            <code>}</code>
        </pre>
    </div>
</section>


<section class="slide">
    <div>
        <h2>Почему-бы и нет :)</h2>
        <pre>
            <code>function Entity(type, options) {</code>
            <code>  var Constructor = this.getConstructor(type);</code>
            <code>  return new Constructor(options)</code>
            <code>}</code>
        </pre>
    </div>
</section>


<section class="slide">
    <div>
        <h2>Обычный вызов</h2>
    </div>
</section>

<section class="slide">
    <div>
        <h2>Пример:</h2>
        <pre class="code_size_medium">
            <code>function sum () {</code>
            <code>  return this.x + this.y;</code>
            <code>}</code>
            <code>  </code>
            <code>console.log(sum());</code>
            <code class="next">// Reference Error</code>
        </pre>
    </div>
</section>

<section class="slide">
    <div>
        <h2>Поправим код</h2>
        <pre class="code_size_medium">
            <code>function sum () {</code>
            <code>  return this.x + this.y;</code>
            <code>}</code>
            <code>  </code>
            <code>var x = 2, y = 3; </code>
            <code>  </code>
            <code>console.log(sum());</code>
            <code class="next">// 5</code>
        </pre>
    </div>
</section>

<section class="slide">
    <div>
        <h2>Поправим код</h2>
        <pre class="code_size_medium">
            <code>'use strict';</code>
            <code>function sum () {</code>
            <code>  return this.x + this.y;</code>
            <code>}</code>
            <code>  </code>
            <code>var x = 2, y = 3; </code>
            <code>  </code>
            <code>console.log(sum());</code>
            <code class="next">// Reference error</code>
        </pre>
    </div>
</section>


<section class="slide">
    <div>
        <h2>Обычный вызов</h2>
        <pre class="code_size_medium">
            <code>'use strict';</code>
            <code>var person = {name: 'mangin alexender'};</code>
            <code>  </code>
            <code>person.type = getType(person.name);</code>
            <code>if (person.type === 'student') {</code>
            <code>  person.action = function () { console.log(this.name + " слушает лекцию")}</code>
            <code>}</code>
            <code>if (person.type === 'teacher') {</code>
            <code>  person.action = function () { console.log(this.name + " рассказывает лекцию")}</code>
            <code>}</code>
            <code> </code>
            <code>person.action();</code>
        </pre>
    </div>
</section>

<section class="slide">
    <div>
        <h2>Алгоритм</h2>
        <ul>
            <li>Имеем на вход: [owner.]method</li>
            <li>Если 'точки' нет:
                <ul>
                    <li>если 'use strict', return undefined</li>
                    <li>иначе, return GlobalObject</li>
                </ul>
            </li>
            <li>this = owner</li>
        </ul>
    </div>
</section>

<section class="slide">
    <div>
        <h2>Переопредление контекста</h2>
        <ul>
            <li>Ручное переопределение</li>
            <li>.call</li>
            <li>.apply</li>
            <li>.bind</li>
        </ul>
    </div>
</section>

<section class="slide">
    <div>
        <h2>Ручное переопределение</h2>
        <pre>
            <code>calendar.init = function () {</code>
            <code>  var button = $('.calendar').click(function () {</code>
            <code>    this.container.show();</code>
            <code>  });</code>
            <code>}</code>
        </pre>
    </div>
</section>

<section class="slide">
    <div>
        <h2>Ручное переопределение</h2>
        <pre>
            <code>calendar.init = function () {</code>
            <code>  var self = this,</code>
            <code>    button = $('.calendar').click(function () {</code>
            <code>      this.container.show();</code>
            <code>  });</code>
            <code>}</code>
        </pre>
    </div>
</section>

<section class="slide">
    <div>
        <h2>.call(context, arg1, arg2, arg3, ...)</h2>
    </div>
</section>

<section class="slide">
    <div>
        <h2>.call</h2>
        <pre>function filter(callback) {</pre>
        <pre>  var arr = this,</pre>
        <pre>      result = [];</pre>
        <pre>  for(var i = 0; i < arr.length; i+=1) {</pre>
        <pre>    if (callback.call(null, arr[i], i) {</pre>
        <pre>      result.push(arr[i]);</pre>
        <pre>    }</pre>
        <pre>  }</pre>
        <pre>}</pre>
    </div>
</section>

<section class="slide">
    <div>
        <h2>.call</h2>
        <pre>$.click = function (callback) {</pre>
        <pre>  /**всякий код**/</pre>
        <pre>  callback.call(jqCollerction, event)</pre>
        <pre>  /**всякий код**/</pre>
        <pre>}</pre>
    </div>
</section>

<section class="slide">
    <div>
        <h2>.apply(context, args)</h2>
    </div>
</section>

<section class="slide">
    <div>
        <h2>.apply</h2>
        <pre>var args = [1,2,3,4,5, -1];</pre>
        <pre> </pre>
        <pre>console.log(Math.min.apply(null, args));</pre>
    </div>
</section>


<section class="slide">
    <div>
        <h2>.bind(context, argValue1, argValue2, argValue3)</h2>
    </div>
</section>

<section class="slide">
    <div>
        <h2>Пример:</h2>
        <pre>
            <code>function sum(a, b) {</code>
            <code> return a + b;</code>
            <code>}</code>
            <code> </code>
            <code>var sumWith2 = sum.bind(null, 2);</code>
            <code>console.log(sumWith2(3)); //5</code>
        </pre>
    </div>
</section>

<section class="slide">
    <div>
        <h2>Пример:</h2>
        <pre>
            <code>function makeReport(dataProvider, opt1, opt2) {</code>
            <code> /** code **/</code>
            <code>}</code>
            <code> </code>
            <code>var makeReportForCurrentPerson = makeReport.bind(dataProvider);</code>
            <code>makeReportForCurrentPerson('opt1', 'opt2');</code>
        </pre>
    </div>
</section>

<section class="slide">
    <div>
        <h2>Пример:</h2>
        <pre>
            <code>function f () {</code>
            <code>  console.log(this);</code>
            <code>}</code>
            <code> </code>
            <code>var fWithSecret = f.bind(42);</code>
            <code>fWithSecret();</code>
            <code class="next">fWithSecret.call(13);</code>
        </pre>
    </div>
</section>

<section class="slide">
    <div>
        <h2>Алгоритм</h2>
        <pre>
            <code>function bind(scope) {</code>
            <code>var callback = this,</code>
            <code>    prepend = Array.prototype.slice.call(arguments, 1),</code>
            <code>    bound = function () {</code>
            <code>        return callback.apply(scope, </code>
            <code>            prepend.concat(Array.prototype.slice.call(arguments, 0))</code>
            <code>        );</code>
            <code>    };</code>
            <code> </code>
            <code>    return bound;</code>
            <code>};</code>
        </pre>
    </div>
</section>

<section class="slide">
    <div>
        <h2>Что было рассказано на лекции:</h2>
        <ul>
            <li>=== vs ==</li>
            <li>||, &&, ','</li>
            <li>Statement и Expression</li>
            <li>Функции</li>
            <li>this</li>
            <li>call, bind, apply</li>
        </ul>
    </div>
</section>


<div class="progress">
    <div></div>
</div>
<script src="../../node_modules/shower-core/shower.min.js"></script>
<!-- Copyright © 2014 Yours Truly, Famous Inc. -->
<!-- Photos by John Carey, fiftyfootshadows.net -->
</body>
</html>